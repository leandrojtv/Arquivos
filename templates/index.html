{% extends "base.html" %}
{% block content %}
<section class="form-section">
  <h2>Novo cadastro</h2>
  <form action="{{ url_for('add_person') }}" method="post" class="card">
    <label for="name">Nome</label>
    <input type="text" id="name" name="name" required />

    <label for="area">Área / Coordenação</label>
    <input type="text" id="area" name="area" required />

    <label for="database">Banco de Dados gerido</label>
    <input type="text" id="database" name="database" required />

    <button type="submit">Salvar</button>
  </form>
</section>

<section class="list-section">
  <h2>Cadastros existentes</h2>
  {% if records %}
    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Área / Coordenação</th>
          <th>Banco de Dados</th>
          <th class="actions">Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for person in records %}
          <tr>
            <td>{{ person["name"] }}</td>
            <td>{{ person["area"] }}</td>
            <td>{{ person["database"] }}</td>
            <td class="actions">
              <a class="button secondary" href="{{ url_for('edit_person', person_id=person['id']) }}">Editar</a>
              <form action="{{ url_for('delete_person', person_id=person['id']) }}" method="post" onsubmit="return confirm('Deseja excluir este registro?');">
                <button type="submit" class="danger">Excluir</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Nenhum cadastro encontrado.</p>
  {% endif %}
</section>
{% endblock %}
