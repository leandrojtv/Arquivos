{% extends "base.html" %}
{% block title %}Cadastros{% endblock %}
{% block content %}
<section class="list-section">
  <div class="section-header">
    <div>
      <p class="eyebrow">Visão geral</p>
      <h2>Cadastros existentes</h2>
      <p class="subtitle">Confira e gerencie os registros já cadastrados.</p>
    </div>
    <div class="section-actions">
      <a class="button" href="{{ url_for('new_person_form') }}"><svg class="icon"><use href="#icon-plus"></use></svg><span>Novo cadastro</span></a>
      <a class="button secondary" href="{{ url_for('search') }}"><svg class="icon"><use href="#icon-search"></use></svg><span>Pesquisar</span></a>
    </div>
  </div>
  {% if records %}
    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Área / Coordenação</th>
          <th>Banco de Dados</th>
          <th class="actions">Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for person in records %}
          <tr>
            <td>{{ person["name"] }}</td>
            <td>{{ person["area"] }}</td>
            <td>{{ person["database"] }}</td>
            <td class="actions">
              <a class="button secondary compact" href="{{ url_for('edit_person', person_id=person['id']) }}"><svg class="icon"><use href="#icon-edit"></use></svg><span>Editar</span></a>
              <form action="{{ url_for('delete_person', person_id=person['id']) }}" method="post" onsubmit="return confirm('Deseja excluir este registro?');">
                <button type="submit" class="button ghost danger compact"><svg class="icon"><use href="#icon-trash"></use></svg><span>Excluir</span></button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Nenhum cadastro encontrado.</p>
  {% endif %}
</section>
{% endblock %}
